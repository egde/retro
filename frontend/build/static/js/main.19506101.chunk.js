(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{28:function(e,t,a){e.exports=a(66)},34:function(e,t,a){},66:function(e,t,a){"use strict";a.r(t);var s=a(0),n=a.n(s),i=a(23),o=a.n(i),r=(a(34),a(4)),c=a(8),l=a(10),d=a(9),u=a(11),m=(a(36),a(38),a(68)),h=a(69),b=a(70),v=a(2),E=a(67),O={LOAD_BOARD:"LOAD_BOARD",LOAD_BOARDS:"LOAD_BOARDS",ADD_BOARD:"ADD_BOARD"},p="LOAD_BOARD_COMPLETED",f="LOAD_BOARDS_COMPLETED",I=O,y=new(a(24).Dispatcher),S={loadBoards:function(e){y.dispatch({type:I.LOAD_BOARDS,ownerId:e})},loadBoard:function(e){y.dispatch({type:I.LOAD_BOARD,boardId:e})},addBoard:function(e){y.dispatch({type:I.ADD_BOARD,board:e})}},k=a(12),B=a(13),D=a.n(B),N=new(function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(l.a)(this,Object(d.a)(t).call(this,e))).boards=[],a.board={},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"getBoards",value:function(){return this.boards}},{key:"getBoard",value:function(){return this.board}},{key:"loadBoards",value:function(e){var t=this;D.a.get("/api/boards").then(function(e){t.boards=e.data,t.emit(f)}).catch(function(e){console.log(e)})}},{key:"loadBoard",value:function(e){var t=this;D.a.get("/api/boards/"+e).then(function(e){t.board=e.data,t.emit(p)}).catch(function(e){console.log(e)})}},{key:"addBoard",value:function(e){var t=this;D.a.post("/api/boards",e).then(function(a){t.loadBoards(e.ownerId)}).catch(function(e){console.log(e)})}},{key:"handleActions",value:function(e){switch(e.type){case O.LOAD_BOARDS:if(!e.ownerId){this.emit(f);break}this.loadBoards(e.ownerId);break;case O.LOAD_BOARD:if(!e.boardId){this.emit(p);break}this.loadBoard(e.boardId);break;case O.ADD_BOARD:if(!e.board){this.emit(k.EventEmitter.LOAD_BOARDS_COMPLETED);break}this.addBoard(e.board);break;default:return}}}]),t}(k.EventEmitter));y.register(N.handleActions.bind(N));var A=N,g=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(l.a)(this,Object(d.a)(t).call(this,e))).state={boards:[],board:{},ownerId:"123",isShowAddBoard:!1},a.addBoard=a.addBoard.bind(Object(v.a)(Object(v.a)(a))),a.addNewBoard=a.addNewBoard.bind(Object(v.a)(Object(v.a)(a))),a.handleChange=a.handleChange.bind(Object(v.a)(Object(v.a)(a))),a.loadBoards=a.loadBoards.bind(Object(v.a)(Object(v.a)(a))),a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentWillMount",value:function(){A.on(f,this.loadBoards)}},{key:"componentWillUnmount",value:function(){A.removeListener(f,this.loadBoards)}},{key:"componentDidMount",value:function(){S.loadBoards("xx")}},{key:"loadBoards",value:function(){this.setState({boards:A.getBoards()})}},{key:"addBoard",value:function(){var e={title:""};e.ownerId=this.state.ownerId,e.states=["Smile","Frown","Improve"],this.setState({board:e,isShowAddBoard:!0})}},{key:"handleChange",value:function(e){var t=e.target,a="checkbox"===t.type?t.checked:t.value,s=t.name,n=this.state.board;if("stateInd"===s)switch(a){case"1":n.states=["GOOD","BAD","DISCONTINUE"];break;default:n.states=["Smile","Frown","Improve"]}n[s]=a,this.setState({board:n})}},{key:"addNewBoard",value:function(){S.addBoard(this.state.board),this.setState({isShowAddBoard:!1})}},{key:"render",value:function(){var e=this;return n.a.createElement("section",{id:"BoardOverview",className:"section"},n.a.createElement("div",{className:"container"},n.a.createElement("h1",{className:"title"},"Boards Overview"),n.a.createElement("button",{className:"button is-primary",onClick:this.addBoard},"Add"),n.a.createElement("div",{className:"container"},n.a.createElement("div",{className:"tile is-ancestor is-vertical"},Object.entries(this.state.boards).map(function(e){return n.a.createElement("div",{key:e[1].id,className:"tile is-parent"},n.a.createElement("article",{className:"tile is-child notification is-info"},n.a.createElement(E.a,{to:"/board/"+e[1].id},e[1].title)))})))),this.state.isShowAddBoard&&n.a.createElement("div",{className:"modal is-active"},n.a.createElement("div",{className:"modal-background"}),n.a.createElement("div",{className:"modal-content"},n.a.createElement("div",{className:"box"},n.a.createElement("div",{className:"field"},n.a.createElement("label",{className:"label"},"Title:"),n.a.createElement("div",{className:"control"},n.a.createElement("input",{type:"text",className:"input",name:"title",value:this.state.board.title,onChange:this.handleChange}))),n.a.createElement("div",{className:"field"},n.a.createElement("label",{className:"label"},"States"),n.a.createElement("div",{className:"control"},n.a.createElement("div",{className:"select"},n.a.createElement("select",{name:"stateInd",onChange:this.handleChange,value:this.state.board.stateInd},n.a.createElement("option",{value:"0"},"Smile - Frown - Improve"),n.a.createElement("option",{value:"1"},"GOOD - BAD - DISCONTINUE"))))),n.a.createElement("div",{className:"field is-grouped"},n.a.createElement("div",{className:"control"},n.a.createElement("button",{className:"button is-primary",onClick:this.addNewBoard},"Add")),n.a.createElement("div",{className:"control"},n.a.createElement("button",{className:"button",onClick:function(){return e.setState({isShowAddBoard:!1})}},"Cancel"))))),n.a.createElement("button",{className:"modal-close is-large","aria-label":"close",onClick:function(){return e.setState({isShowAddBoard:!1})}})))}}]),t}(s.Component),j=a(25),w=a.n(j),C=function e(){Object(r.a)(this,e),this.id=w()(),this.dbId=null,this.text="",this.state="",this.boardId=""},_=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(l.a)(this,Object(d.a)(t).call(this,e))).onMouseOver=function(){a.setState({mode:"EDIT"})},a.onMouseLeave=function(){a.setState({mode:"READ"})},a.state={mode:"READ"},a.handleChange=a.handleChange.bind(Object(v.a)(Object(v.a)(a))),a.deleteEntry=a.deleteEntry.bind(Object(v.a)(Object(v.a)(a))),a.onFocusOut=a.onFocusOut.bind(Object(v.a)(Object(v.a)(a))),a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"deleteEntry",value:function(){var e=this.props.name;this.props.onDelete(e)}},{key:"onFocusOut",value:function(){var e=this.props.name;this.props.onFocusOut(e)}},{key:"handleChange",value:function(e){var t=e.target,a="checkbox"===t.type?t.checked:t.value,s=this.props.issue.text,n=this.props.issue.state;"text"===t.name?s=a:"state"===t.name&&(n=a);var i=new C;i.id=this.props.name,i.state=n,i.text=s,i.boardId=this.props.issue.boardId,i.dbId=this.props.issue.dbId;var o={target:{type:"issue",value:i,name:this.props.name}};this.props.onChange(o),"select-one"===t.type&&this.onFocusOut()}},{key:"render",value:function(){return n.a.createElement("div",{id:"issue-"+this.props.issue.id,className:"box draggable",draggable:!0},n.a.createElement("div",{className:"field"},n.a.createElement("div",{className:"control"},"READ"===this.state.mode&&n.a.createElement("p",{onMouseOver:this.onMouseOver},this.props.issue.text),"EDIT"===this.state.mode&&n.a.createElement("textarea",{className:"textarea has-fixed-size",name:"text",value:this.props.issue.text,onChange:this.handleChange,onBlur:this.onFocusOut,onMouseLeave:this.onMouseLeave}))),n.a.createElement("div",{className:"field is-grouped"},n.a.createElement("div",{className:"control"},"READ"===this.state.mode&&n.a.createElement("p",{onMouseOver:this.onMouseOver},this.props.issue.state),"EDIT"===this.state.mode&&n.a.createElement("div",{className:"select"},n.a.createElement("select",{name:"state",onChange:this.handleChange,value:this.props.issue.state,onBlur:this.onFocusOut,onMouseLeave:this.onMouseLeave},this.props.states.map(function(e,t){return n.a.createElement("option",{key:t,value:e},e)})))),n.a.createElement("div",{className:"control"},n.a.createElement("button",{className:"button is-light",onClick:this.deleteEntry},n.a.createElement("span",{className:"icon"},n.a.createElement("i",{className:"fas fa-trash"}))))))}}]),t}(s.Component),L={LOAD_ISSUES:"LOAD_ISSUES",SAVE_ISSUE:"SAVE_ISSUE"},x="LOAD_ISSUES_COMPLETED",M=L,R={loadIssues:function(e){y.dispatch({type:M.LOAD_ISSUES,boardId:e})},saveIssue:function(e){y.dispatch({type:M.SAVE_ISSUE,issue:e})}},U=new(function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(l.a)(this,Object(d.a)(t).call(this,e))).issues=[],a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"getIssues",value:function(){return this.issues}},{key:"loadIssues",value:function(e){var t=this;D.a.get("/api/issues",{params:{boardId:e}}).then(function(e){t.issues=e.data,t.emit(x)}).catch(function(e){console.log(e)})}},{key:"saveIssue",value:function(e){var t=this;e.dbId?D.a.post("/api/issues/"+e.dbId,e).then(function(a){t.loadIssues(e.boardId),t.emit(k.EventEmitter.SAVE_ISSUE_COMPLETED)}).catch(function(e){console.log(e)}):D.a.post("/api/issues",e).then(function(a){t.loadIssues(e.boardId),t.emit(k.EventEmitter.SAVE_ISSUE_COMPLETED)}).catch(function(e){console.log(e)})}},{key:"handleActions",value:function(e){switch(e.type){case L.LOAD_ISSUES:if(!e.boardId){this.emit(x);break}this.loadIssues(e.boardId);break;case L.SAVE_ISSUE:if(!e.issue){this.emit(k.EventEmitter.SAVE_ISSUE_COMPLETED);break}this.saveIssue(e.issue);break;default:return}}}]),t}(k.EventEmitter));y.register(U.handleActions.bind(U));var T=U,F=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(l.a)(this,Object(d.a)(t).call(this,e))).state={board:{},issues:[]},a.handleChange=a.handleChange.bind(Object(v.a)(Object(v.a)(a))),a.addIssue=a.addIssue.bind(Object(v.a)(Object(v.a)(a))),a.deleteEntry=a.deleteEntry.bind(Object(v.a)(Object(v.a)(a))),a.setBoard=a.setBoard.bind(Object(v.a)(Object(v.a)(a))),a.setIssues=a.setIssues.bind(Object(v.a)(Object(v.a)(a))),a.saveEntry=a.saveEntry.bind(Object(v.a)(Object(v.a)(a))),a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentWillMount",value:function(){A.on(p,this.setBoard),T.on(x,this.setIssues)}},{key:"componentWillUnmount",value:function(){A.removeListener(p,this.setBoard),T.removeListener(x,this.setIssues)}},{key:"componentDidMount",value:function(){var e=this.props.match.params.id;S.loadBoard(e),R.loadIssues(e)}},{key:"setBoard",value:function(){this.setState({board:A.getBoard()})}},{key:"setIssues",value:function(){this.setState({issues:T.getIssues()})}},{key:"saveEntry",value:function(e){var t=this.state.issues.find(function(t){return t.id===e});R.saveIssue(t)}},{key:"deleteEntry",value:function(e){var t=this.state.issues,a=t.findIndex(function(t){return t.id===e});a>=0&&(t.splice(a,1),this.setState({issues:t}))}},{key:"addIssue",value:function(e){var t=e.target.name,a=this.state.issues,s=new C;s.boardId=this.state.board.id,s.state=t,a.push(s),this.setState({issues:a})}},{key:"handleChange",value:function(e){var t=e.target,a="checkbox"===t.type?t.checked:t.value,s=t.name;if("issue"===t.type){var n=this.state.issues,i=n.findIndex(function(e){return e.id===s});i>=0&&(n[i]=a,this.setState({issues:n}))}}},{key:"render",value:function(){var e=this;return this.state.board?n.a.createElement("section",{id:"board",className:"section"},n.a.createElement("div",{className:"container"},n.a.createElement("h1",{className:"title"},"Board - ".concat(this.state.board.title)),n.a.createElement("div",{className:"columns"},this.state.board.states&&this.state.board.states.map(function(t,a){var s=e.state.issues.filter(function(e){return e.state===t});return n.a.createElement("div",{key:t,className:"column"},n.a.createElement("div",{className:"has-background-light"},n.a.createElement("div",{className:"level"},n.a.createElement("div",{className:"level-left"},n.a.createElement("div",{className:"level-item"},n.a.createElement("p",{className:"heading"},t))),n.a.createElement("div",{className:"level-right"},n.a.createElement("div",{className:"level-item"},n.a.createElement("button",{name:t,className:"button is-primary is-small",onClick:e.addIssue},"Add")))),n.a.createElement("div",{className:"section"},n.a.createElement("div",{className:"content"},s.map(function(t,a){return n.a.createElement(_,{issue:t,states:e.state.board.states,key:a,name:t.id,onChange:e.handleChange,onDelete:e.deleteEntry,onFocusOut:e.saveEntry})})))))})))):n.a.createElement("section",{className:"section"},n.a.createElement("h1",{className:"Title"},"Nothing found here"))}}]),t}(s.Component),P=function(e){function t(){return Object(r.a)(this,t),Object(l.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return n.a.createElement(m.a,null,n.a.createElement(h.a,null,n.a.createElement(b.a,{exact:!0,path:"/",component:g}),n.a.createElement(b.a,{path:"/board/:id",component:F})))}}]),t}(s.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(n.a.createElement(P,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[28,2,1]]]);
//# sourceMappingURL=main.19506101.chunk.js.map